<body>
	<h3 id="text"></h3>
</body>
<script src="https://www.gstatic.com/firebasejs/4.1.3/firebase.js"></script>
<script>
	document.addEventListener('DOMContentLoaded', function() {

	  // Get the action to complete.
	  var mode = getParameterByName('mode');
	  // Get the one-time code from the query parameter.
	  var actionCode = getParameterByName('oobCode');
	  // (Optional) Get the API key from the query parameter.
	  var apiKey = getParameterByName('apiKey');

	  // Configure the Firebase SDK.
	  // This is the minimum configuration required for the API to be used.
	  var config = {
	    'apiKey': apiKey,
	  };
	  var app = firebase.initializeApp(config);
	  var auth = app.auth();
	  // Handle the user management action.
	  switch (mode) {
	    case 'resetPassword':
	      // Display reset password handler and UI.
	      handleResetPassword(auth, actionCode);
	      break;
	    case 'recoverEmail':
	      // Display email recovery handler and UI.
	      handleRecoverEmail(auth, actionCode);
	      break;
	    case 'verifyEmail':
	      // Display email verification handler and UI.
	      handleVerifyEmail(auth, actionCode);
	      break;
	    default:
	      // Error: invalid mode.
	  }
	}, false);

	function getParameterByName(name, url) {
	    if (!url) url = window.location.href;
	    name = name.replace(/[\[\]]/g, "\\$&");
	    var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
	        results = regex.exec(url);
	    if (!results) return null;
	    if (!results[2]) return '';
	    return decodeURIComponent(results[2].replace(/\+/g, " "));
	}

	function handleVerifyEmail(auth, actionCode) {

	  //Try to apply the email verification code.
	  auth.applyActionCode(actionCode).then(function(resp) {
	  	document.getElementById('text').innerHTML = "Email Verificado";
	    // Email address has been verified.

	    // TODO: Display a confirmation message to the user.
	    // You could also provide the user with a link back to the app.
	  }).catch(function(error) {
	  	document.getElementById('text').innerHTML = error;
	  	console.log(error);
	    // Code is invalid or expired. Ask the user to verify their email address
	    // again.
	  });
	}
</script>